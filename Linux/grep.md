```toc

```

## 语法
```shell
grep [-abcEFGhHilLnqrsvVwxy][-A<显示行数>][-B<显示列数>][-C<显示列数>][-d<进行动作>][-e<范本样式>][-f<范本文件>][--help][范本样式][文件或目录...]
```

## 参数

-   **`-A<显示行数> 或 --after-context=<显示行数>`** : 除了显示符合范本样式的那一列之外，并显示该行之后的内容。

-   **`-B<显示行数> 或 --before-context=<显示行数>`** : 除了显示符合样式的那一行之外，并显示该行之前的内容。

-   **`-C<显示行数> 或 --context=<显示行数>或-<显示行数>`** : 除了显示符合样式的那一行之外，并显示该行之前后的内容。

- **`-d <动作> 或 --directories=<动作>`** : 当指定要查找的是目录而非文件时，必须使用这项参数

-   **`-e<范本样式> 或 --regexp=<范本样式>`** : 指定字符串做为查找文件内容的样式。

-   **`-E 或 --extended-regexp`** : 将样式为延伸的正则表达式来使用。

-   **`-f<规则文件> 或 --file=<规则文件>`** : 指定规则文件，其内容含有一个或多个规则样式，让 `grep` 查找符合规则条件的文件内容，格式为每行一个规则样式。

-   **`-F 或 --fixed-regexp`** : 将样式视为固定字符串的列表。

-   **`-G 或 --basic-regexp `** : 将样式视为普通的表示法来使用。

-   **`-i 或 --ignore-case`** : 忽略字符大小写的差别。
 
-   **`-l 或 --file-with-matches `** : 列出文件内容符合指定的样式的文件名称。
 
-   **`-L 或 --files-without-match`** : 列出文件内容不符合指定的样式的文件名称。
 
-   **`-o 或 --only-matching`** : 只显示匹配 `PATTERN` 部分。
 
- **`-r 或 --recursive`** : 此参数的效果和指定"`-d recurse`"参数相同。
 
-   **`-v 或 --invert-match `** : 显示不包含匹配文本的所有行。
 
-   **`-w 或 --word-regexp`** : 只显示全字符合的列。
 
-   **`-x --line-regexp `** : 只显示全列符合的列。


## 示例

### 基本搜索

查找后缀有 `file` 字样文件中包含 `test` 字符串的文件，并打印包含 `test`字符串的行
```shell
grep test *file
```


### 以递归的方式查找符合条件的文件

查找指定目录 `/etc/acpi` 及其子目录（如果存在子目录的话）下所有文件中包含字符串"`update`"的文件，并打印出该字符串所在行的内容
```shell
grep -r update /etc/acpi
```


### 反向查找
前面各个例子是查找并打印出符合条件的行，通过"`-v`"参数可以打印出不符合条件行的内容。查找文件名中包含 `file` 的文件中不包含 `test` 的行
```shell
grep -v test *file*
```


### 日志太大，通过时间查找
系统报警显示了时间，但是日志文件太大无法直接 cat 查看
```shell
grep -n '2019-10-24 00:01:11' *.log
```


### 正则查找
从文件内容查找与正则表达式匹配的行
```shell
grep –e "正则表达式" 文件名
```


### 不区分大小写查找
```shell
grep –i "被查找的字符串" 文件名
```

### 配合 find
从根目录开始查找所有扩展名为 `.log` 的文本文件，并找出包含 "`ERROR`" 的行：
```shell
find / -type f -name "*.log" | xargs grep "ERROR"
```




